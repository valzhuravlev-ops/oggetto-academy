window.isMobile = !1;
if (
  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
    navigator.userAgent,
  )
) {
  window.isMobile = !0;
}
function t_throttle(fn, threshhold, scope) {
  var last;
  var deferTimer;
  threshhold || (threshhold = 250);
  return function () {
    var context = scope || this;
    var now = +new Date();
    var args = arguments;
    if (last && now < last + threshhold) {
      clearTimeout(deferTimer);
      deferTimer = setTimeout(function () {
        last = now;
        fn.apply(context, args);
      }, threshhold);
    } else {
      last = now;
      fn.apply(context, args);
    }
  };
}
function t451_initMenu(recid) {
  var rec = document.getElementById("rec" + recid);
  if (!rec) return;
  var burgerList = rec.querySelectorAll(".t451 .t-menuburger");
  var menu = rec.querySelector(".t451m");
  var menuBlock = rec.querySelector(".t451");
  var overlay = rec.querySelector(".t451m__overlay");
  var links = rec.querySelectorAll(".t-menu__link-item");
  Array.prototype.forEach.call(burgerList, function (burger) {
    burger.addEventListener("click", function (e) {
      e.preventDefault();
      t451_closeMenu(menu, overlay);
      t451_showMenu(menu, overlay);
      t451_checkSize(menu);
    });
  });
  if (menu) {
    menu.click(function (e) {
      t451_closeMenu(menu, overlay);
      t451_showMenu(menu, overlay);
      t451_checkSize(menu);
      e.preventDefault();
    });
  }
  if (menuBlock) {
    menuBlock.addEventListener("clickedAnchorInTooltipMenu", function () {
      t451_closeMenu(menu, overlay);
    });
  }
  rec.addEventListener("click", function (e) {
    if (window.innerWidth > 980) return;
    var submenuClassList = [
      ".t451__link-item_submenu",
      ".t966__tm-link",
      ".t978__tm-link",
      ".t978__menu-link_hook",
    ];
    var isContainsSubmenuClass = submenuClassList.some(function (className) {
      return e.target.closest(className);
    });
    if (!isContainsSubmenuClass) return;
    setTimeout(function () {
      t451_checkSize(menu);
    }, 100);
  });
  window.addEventListener("resize", function () {
    t451_checkSize(menu);
  });
  menu.addEventListener("menuOverflow", function () {
    t451_checkSize(menu);
  });
  var navLinks = rec.querySelectorAll(
    '.t451 a.t-menu__link-item[href*="#"], .t451 a.t-menusub__link-item[href*="#"]',
  );
  navLinks = Array.prototype.filter.call(navLinks, function (navLink) {
    return !navLink.classList.contains("tooltipstered");
  });
  if (navLinks.length > 0) {
    t_onFuncLoad("t_menu__updateActiveLinks", function () {
      t_menu__updateActiveLinks(navLinks, ".t451");
    });
  }
  t_onFuncLoad("t_menu__highlightActiveLinks", function () {
    t_menu__highlightActiveLinks(".t451m__menu a");
  });
  document.addEventListener("click", function (e) {
    if (
      e.target.closest(
        '.t451m__overlay, .t451m__close, a[href*="#"]:not(.tooltipstered):not(.t794__tm-link):not(.t978__tm-link):not(.t966__tm-link):not(.t978__menu-link_hook):not(.t-menuwidgeticons__link_wishlist):not(.t-menuwidgeticons__link_cart)',
      )
    ) {
      t451_closeMenu(menu, overlay);
    }
  });
  document.addEventListener("keydown", function (e) {
    if (e.keyCode === 27) {
      t451_closeMenu(menu, overlay);
    }
  });
}
function t451_showMenu(menu, overlay) {
  if (!menu) return;
  if (typeof t_triggerEvent === "function")
    t_triggerEvent(document.body, "popupShowed");
  document.body.classList.add("t451__body_menushowed");
  menu.classList.add("t451m__menu_show");
  if (overlay) overlay.classList.add("t451m__menu_show");
}
function t451_closeMenu(menu, overlay) {
  if (typeof t_triggerEvent === "function")
    t_triggerEvent(document.body, "popupHidden");
  document.body.classList.remove("t451__body_menushowed");
  if (menu) menu.classList.remove("t451m__menu_show");
  if (overlay) overlay.classList.remove("t451m__menu_show");
}
function t451_checkSize(menu) {
  if (!menu) return;
  var menuTop = menu.querySelector(".t451m__top");
  var menuRight = menu.querySelector(".t451m__rightside");
  var menuContainer = menu.querySelector(".t451m__container");
  var menuTopHeight = menuTop ? menuTop.offsetHeight : 0;
  var menuRightHeight = menuRight ? menuRight.offsetHeight : 0;
  var windowPadding = 80;
  if (menuTopHeight + menuRightHeight + windowPadding > window.innerHeight) {
    menu.classList.add("t451m__overflowed");
    if (menuContainer) menuContainer.style.height = "auto";
  } else {
    menu.classList.remove("t451m__overflowed");
    if (menuContainer) menuContainer.style.height = "";
  }
}
function t451_appearMenu(recid) {
  var rec = document.getElementById("rec" + recid);
  var burger = rec ? rec.querySelector(".t451__panel") : null;
  if (!burger) return;
  var burgerAppearOffset = burger
    ? burger.getAttribute("data-appearoffset")
    : "";
  if (burgerAppearOffset)
    burgerAppearOffset = t451_appearMenuParseNumber(burgerAppearOffset);
  if (window.pageYOffset >= burgerAppearOffset) {
    if (burger.classList.contains("t451__beforeready")) {
      burger.classList.remove("t451__beforeready");
    }
  } else {
    burger.classList.add("t451__beforeready");
  }
}
function t451_appearMenuParseNumber(string) {
  if (string.indexOf("vh") > -1) {
    string = Math.floor(window.innerHeight * (parseInt(string, 10) / 100));
  }
  return parseInt(string, 10);
}
window.requestAnimationFrame = (function () {
  return (
    window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function (callback) {
      window.setTimeout(callback, 1000 / 60);
    }
  );
})();
function t270_scroll(hash, offset) {
  if (!hash) return;
  t270_checkLoad(hash, offset);
  var excludeHashes = ["#!/tproduct/", "#!/tab/", "#opencart"];
  if (excludeHashes.includes(hash)) {
    return !0;
  }
  var isHistoryChangeAllowed = window.location.hash !== hash;
  var wrapperBlock = document.querySelector(".t270");
  var dontChangeHistory = wrapperBlock
    ? Boolean(wrapperBlock.getAttribute("data-history-disabled"))
    : !1;
  t270_scrollToEl(hash, offset);
  if (!dontChangeHistory && isHistoryChangeAllowed) {
    if (history.pushState) {
      history.pushState(null, null, hash);
    } else {
      window.location.hash = hash;
    }
    isHistoryChangeAllowed = !1;
  }
  return !0;
}
function t270_checkLoad(hash, offset) {
  if (window.t270_loadChecked) return;
  var sliderWrappers = document.body.querySelectorAll(".t-slds__items-wrapper");
  if (!sliderWrappers.length) return;
  var lastWrapper = sliderWrappers[sliderWrappers.length - 1];
  var sliderImgs = lastWrapper
    ? lastWrapper.querySelectorAll(".t-slds__bgimg")
    : [];
  var lastImg = sliderImgs[sliderImgs.length - 1];
  var imageUrl = lastImg
    ? window.getComputedStyle(lastImg).backgroundImage
    : "";
  imageUrl = imageUrl.substring(5, imageUrl.length - 2);
  var preloaderImg = document.createElement("img");
  preloaderImg.src = imageUrl ? imageUrl : "";
  preloaderImg.addEventListener("load", function () {
    t270_scroll(hash, offset);
    window.t270_loadChecked = !0;
  });
}
function t270_scrollToEl(hash, offset) {
  var SCROLL_DURATION_MS = 500;
  var body = document.body;
  if (body.getAttribute("data-scroll")) return;
  var scrollTargetY = t270_getTarget(hash, offset);
  if (isNaN(scrollTargetY)) return;
  var canSmoothScroll =
    window.CSS &&
    window.CSS.supports("scroll-behavior", "smooth") &&
    "scrollBehavior" in document.documentElement.style;
  var userAgent = navigator.userAgent.toLowerCase();
  var isAndroid = userAgent.indexOf("android") !== -1;
  if (window.isMobile && !isAndroid && canSmoothScroll) {
    body.setAttribute("data-scroll", "true");
    window.scrollTo({ left: 0, top: scrollTargetY, behavior: "smooth" });
    setTimeout(function () {
      body.removeAttribute("data-scroll");
    }, SCROLL_DURATION_MS);
  } else {
    t270_smoothScrollTo(scrollTargetY, SCROLL_DURATION_MS);
  }
}
function t270_smoothScrollTo(targetY, duration = 500) {
  var body = document.body;
  var startY = window.scrollY || window.pageYOffset;
  var deltaY = targetY - startY;
  var startTime = performance.now();
  function easeInOutQuad(t) {
    return Math.pow(t, 2);
  }
  function scroll() {
    var currentTime = performance.now();
    var elapsedTime = Math.min((currentTime - startTime) / duration, 1);
    var ease = easeInOutQuad(elapsedTime);
    window.scrollTo(0, startY + deltaY * ease);
    if (elapsedTime < 1) {
      requestAnimationFrame(scroll);
    } else {
      body.removeAttribute("data-scroll");
      body.removeAttribute("data-scrollable");
      window.scrollTo(0, targetY);
    }
  }
  body.setAttribute("data-scroll", "true");
  body.setAttribute("data-scrollable", "true");
  requestAnimationFrame(scroll);
}
function t270_getTarget(hash, offset) {
  var target;
  try {
    if (hash.substring(0, 1) === "#") {
      target = document.getElementById(hash.substring(1));
    } else {
      target = document.querySelector(hash);
    }
  } catch (event) {
    console.log("Exception t270: " + event.message);
    return;
  }
  if (!target) {
    target = document.querySelector(
      'a[name="' + hash.substr(1) + '"], div[id="' + hash.substr(1) + '"]',
    );
    if (!target) return;
  }
  target = parseInt(
    target.getBoundingClientRect().top + window.pageYOffset - offset,
    10,
  );
  target = Math.max(target, 0);
  return target;
}
